name: Check types
on:
  workflow_call:
  pull_request_target:
    branches:
      - main
    paths:
      - "**.tsx?"
concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true
env:
  NODE_OPTIONS: "--max-old-space-size=8192"
jobs:
  check-types:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ./.github/actions/dangerous-git-checkout
      - uses: ./.github/actions/yarn-install

      - name: Show info
        run: node -e "console.log(require('v8').getHeapStatistics())"

      - run: yarn type-check
